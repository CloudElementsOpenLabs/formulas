{"id":1446,"name":"FileCopy","userId":2374,"accountId":643,"createdDate":"2020-03-23T15:00:46Z","steps":[{"id":24270,"onSuccess":[],"onFailure":[],"name":"abort","type":"script","properties":{"body":"console.log (\"-=ABORT=- Something went wrong\");"}},{"id":24265,"onSuccess":["destinationFolder"],"onFailure":[],"name":"counter","type":"script","properties":{"body":"console.log (\"#files found \" + steps.originContentRequest.response.body.length);"}},{"id":24271,"onSuccess":["destinationSuccess"],"onFailure":[],"name":"createDestinationFolder","type":"elementRequest","properties":{"api":"/folders","elementInstanceId":"${config.destinationDrive}","body":"${steps.folderJSON.response}","form":"","method":"POST"}},{"id":24268,"onSuccess":["folderJSON"],"onFailure":[],"name":"destinationFailure","type":"script","properties":{"body":"console.log(\"Create folder\")"}},{"id":24266,"onSuccess":["destinationSuccess"],"onFailure":["isFolderNotFoundMessage"],"name":"destinationFolder","type":"elementRequest","properties":{"api":"/folders/contents?path=/_SBData","elementInstanceId":"${config.destinationDrive}","method":"GET"}},{"id":24267,"onSuccess":["loopContent"],"onFailure":[],"name":"destinationSuccess","type":"script","properties":{"body":"console.log(\"Move into loop\");"}},{"id":24264,"onSuccess":["moveOriginToDestination"],"onFailure":[],"name":"fileContentDetail","type":"script","properties":{"body":"done(steps.originContentRequest.response.body[steps.loopContent.index] );"}},{"id":24273,"onSuccess":["createDestinationFolder"],"onFailure":[],"name":"folderJSON","type":"script","properties":{"body":"done ( { \"response\": \n  {\"path\": \"/_SBData\"}\n  });"}},{"id":24269,"onSuccess":["destinationFailure"],"onFailure":["abort"],"name":"isFolderNotFoundMessage","type":"filter","properties":{"body":"done(\"No folder found with the specified ID or path\" == steps.destinationFolder.response.body.message);"}},{"id":24263,"onSuccess":["fileContentDetail"],"onFailure":[],"name":"loopContent","type":"loop","properties":{"list":"${steps.originContentRequest.response.body}"}},{"id":24274,"onSuccess":["loopContent"],"onFailure":[],"name":"moveOriginToDestination","type":"elementRequestStream","properties":{"downloadMethod":"GET","uploadElementInstanceId":"${config.destinationDrive}","uploadApi":"/files?path=/_SBData/${ steps.fileContentDetail.name }","uploadMethod":"POST","downloadApi":"/files/${steps.fileContentDetail.id}","downloadElementInstanceId":"${config.originDrive}"}},{"id":24262,"onSuccess":["counter"],"onFailure":[],"name":"originContentRequest","type":"elementRequest","properties":{"api":"/folders/contents?path=/_SBOrigin","elementInstanceId":"${config.originDrive}","method":"GET"}},{"id":24272,"onSuccess":["destinationSuccess"],"onFailure":["abort"],"name":"verifyFolderCreation","type":"script","properties":{"body":"done(steps.createDestinationFolder.response.code==200);"}}],"triggers":[{"id":1363,"onSuccess":["originContentRequest"],"onFailure":[],"type":"manual","async":true,"name":"trigger","properties":{}}],"engine":"v3","active":true,"debugLoggingEnabled":false,"singleThreaded":false,"configuration":[{"id":4399,"key":"destinationDrive","name":"destinationDrive","type":"elementInstance","required":true},{"id":4398,"key":"originDrive","name":"originDrive","type":"elementInstance","required":true}]}