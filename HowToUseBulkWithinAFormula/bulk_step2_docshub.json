{
  "id": 8076,
  "name": "bulk step 2 - docs hub",
  "userId": 155575,
  "accountId": 155224,
  "createdDate": "2019-08-30T21:34:24Z",
  "steps": [{
    "id": 80242,
    "onSuccess": ["streamBulkResults"],
    "onFailure": [],
    "name": "generateMetadata",
    "type": "script",
    "properties": {
      "body": "let downloadHeaders = {\n  'Accept':'text/csv'\n};\n\nlet uploadHeaders = {\n  'Content-Type': 'multipart/form-data'\n};\n\nlet path = {\n  path: `/Test/${trigger.args.id}.${trigger.args.fileFormat}`\n};\n\ndone({\n  'downloadHeaders': downloadHeaders,\n  'uploadHeaders': uploadHeaders,\n  'path': path\n});"
    }
  }, {
    "id": 80243,
    "onSuccess": [],
    "onFailure": [],
    "name": "streamBulkResults",
    "type": "elementRequestStream",
    "properties": {
      "uploadFormDataName": "",
      "uploadElementInstanceId": "${config.target}",
      "uploadApi": "/files",
      "downloadHeaders": "${steps.generateMetadata.downloadHeaders}",
      "downloadApi": "/bulk/${trigger.args.id}/${config.object}",
      "uploadQuery": "${steps.generateMetadata.path}",
      "uploadMethod": "POST",
      "uploadHeaders": "${steps.generateMetadata.uploadHeaders}",
      "downloadElementInstanceId": "${config.crmSource}",
      "downloadMethod": "GET"
    }
  }, {
    "id": 80241,
    "onSuccess": ["generateMetadata"],
    "onFailure": [],
    "name": "isSuccess",
    "type": "filter",
    "properties": {
      "body": "let status = trigger.args.status;\n\nif (status && status === \"COMPLETED\") {\n  done(true);\n} else {\n  done(false);\n}"
    }
  }],
  "triggers": [{
    "id": 7073,
    "onSuccess": ["isSuccess"],
    "onFailure": [],
    "type": "manual",
    "async": true,
    "name": "trigger",
    "properties": {}
  }],
  "engine": "v3",
  "active": true,
  "singleThreaded": false,
  "debugLoggingEnabled": true,
  "configuration": [{
    "id": 21116,
    "key": "crmSource",
    "name": "crmSource",
    "type": "elementInstance",
    "required": true
  }, {
    "id": 21117,
    "key": "object",
    "name": "object",
    "type": "value",
    "required": true
  }, {
    "id": 21118,
    "key": "target",
    "name": "target",
    "type": "elementInstance",
    "required": true
  }]
}
